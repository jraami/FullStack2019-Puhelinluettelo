(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(44)},42:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(10),o=n.n(a),r=n(0),i=n.n(r),u=n(15),s=n(11),c=n(12),l=n(14),m=n(13),h=n(16),f=function(e){var t=e.text,n=e.handler;return i.a.createElement("button",{onClick:n},t)},d=function(e){var t=e.entry,n=e.button,a=e.buttonOnClick;return i.a.createElement("div",null,t.name,": ",t.number," ",i.a.createElement(function(){return n?i.a.createElement(f,{handler:a,text:"Delete"}):" "},null),i.a.createElement("br",null),i.a.createElement("br",null))},b=function(e){var t=e.text,n=e.value,a=e.onChange;return i.a.createElement("div",null,t,i.a.createElement("input",{value:n,onChange:a}),i.a.createElement("br",null))},v=n(2),p=n.n(v),N="/api/persons",w={getAll:function(){return p.a.get(N).then(function(e){return e.data})},create:function(e){return p.a.post(N,e).then(function(e){return e.data})},update:function(e,t){return p.a.put("".concat(N,"/").concat(e),t).then(function(e){return e.data})},remove:function(e){return p.a.delete(N+"/"+e).then(function(e){return e.data})},change:function(e,t){return p.a.put(N+"/"+e,t).then(function(e){return e.data})}},g=function(e){var t=e.message,n=e.className;return null===t?null:i.a.createElement("div",{className:n},t)},S="notification_success",k="notification_failure",E=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).addPerson=function(e){if(e.preventDefault(),""===n.state.newName)n.setNotification("Please enter a name.",k);else if(""===n.state.newNumber)n.setNotification("Please enter a number, too.",k);else{var t=n.state.phonebook.find(function(e){return e.name.toLowerCase()===n.state.newName.toLowerCase()});if(void 0!==t){var a=Object(u.a)({},t,{number:n.state.newNumber});w.change(t.id,a).then(function(e){var o=n.state.phonebook.map(function(e){return e.id!==t.id?e:a});n.setState({newName:"",newNumber:"",phonebook:o,entriesToShow:o}),n.setNotification("Modified "+a.name+" to phonebook.",S)}).catch(function(e){n.setNotification("Unable to modify "+a.name+" for some reason.",k)})}else{var o={name:n.state.newName,number:n.state.newNumber};w.create(o).then(function(e){n.setState({phonebook:n.state.phonebook.concat(e),entriesToShow:n.state.phonebook.concat(e),newName:"",newNumber:"",searchString:""}),n.setNotification("Added "+o.name+" to phonebook.",S)}).catch(function(e){console.log(e.response.data),n.setNotification("Unable to add "+o.name+" because of error: ",e.response.data)})}}},n.deletePerson=function(e,t){e.preventDefault(),w.remove(t).then(function(e){w.getAll().then(function(e){n.setState({phonebook:e,entriesToShow:e}),n.setNotification("Deleted an entry from the phonebook.",S)})}).catch(function(e){n.setNotification(n.state.phonebook.find(function(e){return e.id===t}).name+" was not found on the server.",k),n.componentDidMount()})},n.handleNameChange=function(e){return n.setState({newName:e.target.value})},n.handleNumberChange=function(e){return n.setState({newNumber:e.target.value})},n.handleSearchChange=function(e){n.setState({searchString:e.target.value}),""===e.target.value?n.setState({entriesToShow:n.state.phonebook}):n.setState({entriesToShow:n.state.phonebook.filter(function(t){var n=t.name.toLowerCase(),a=e.target.value.toLowerCase();return n.includes(a)})})},n.state={phonebook:[],newName:"",newNumber:"",entriesToShow:[],searchString:"",error:{message:"",className:""}},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"setNotification",value:function(e,t){var n=this;this.setState({error:{message:e,className:t}}),setTimeout(function(){n.setState({error:{message:null}})},5e3)}},{key:"componentDidMount",value:function(){var e=this;w.getAll().then(function(t){e.setState({phonebook:t,entriesToShow:t})}).catch(function(e){})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("h2",null,"Puhelinluettelo"),i.a.createElement("form",{onSubmit:this.addPerson},i.a.createElement(b,{text:"Nimi:",value:this.state.newName,onChange:this.handleNameChange}),i.a.createElement(b,{text:"Numero:",value:this.state.newNumber,onChange:this.handleNumberChange}),i.a.createElement("div",null,i.a.createElement("button",{type:"submit"},"Lis\xe4\xe4")),i.a.createElement(g,{className:this.state.error.className,message:this.state.error.message})),i.a.createElement("h2",null,"Numerot"),i.a.createElement(b,{text:"Hae nimell\xe4:",value:this.state.searchString,onChange:this.handleSearchChange}),i.a.createElement("div",null,this.state.entriesToShow.map(function(t){return i.a.createElement(d,{key:t.id,entry:t,button:"true",buttonOnClick:function(n){return e.deletePerson(n,t.id)}})})))}}]),t}(i.a.Component);n(42);o.a.render(i.a.createElement(E,null),document.getElementById("root"))}},[[17,2,1]]]);
//# sourceMappingURL=main.c166c5ba.chunk.js.map